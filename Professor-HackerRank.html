<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Professor â€” Terminal AI</title>
<link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@300;400;500;600&family=IBM+Plex+Sans:wght@300;400;500;600&display=swap" rel="stylesheet">
<style>
/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   ROOT TOKENS â€” HackerRank Palette
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
:root {
  --bg:       #0d1117;
  --bg2:      #13181f;
  --surface:  #161b22;
  --panel:    #1c2128;
  --lift:     #21262d;
  --border:   #30363d;
  --border-2: #3d444d;
  --green:    #00ea64;
  --green-dim:rgba(0,234,100,0.10);
  --green-glow:0 0 18px rgba(0,234,100,0.22);
  --green-2:  #00b86e;
  --text:     #e6edf3;
  --text-2:   #8b949e;
  --text-3:   #484f58;
  --red:      #f85149;
  --yellow:   #f0c040;
  --blue:     #58a6ff;
  --orange:   #ff7b1a;
  --font-mono:'Fira Code',monospace;
  --font-ui:  'IBM Plex Sans',sans-serif;
}

*{margin:0;padding:0;box-sizing:border-box;}
html,body{height:100%;overflow:hidden;}
body{
  background:var(--bg);
  color:var(--text);
  font-family:var(--font-ui);
  display:flex;
  flex-direction:column;
  -webkit-font-smoothing:antialiased;
}

/* â”€â”€ Grid scanline bg â”€â”€ */
body::after{
  content:'';position:fixed;inset:0;pointer-events:none;z-index:0;
  background-image:
    linear-gradient(rgba(0,234,100,.012) 1px, transparent 1px),
    linear-gradient(90deg, rgba(0,234,100,.012) 1px, transparent 1px);
  background-size:40px 40px;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   TOP HEADER BAR
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.header{
  height:44px;flex-shrink:0;
  display:flex;align-items:center;
  background:var(--surface);
  border-bottom:1px solid var(--border);
  position:relative;z-index:100;
  user-select:none;
}

/* Logo / brand */
.header-logo{
  display:flex;align-items:center;gap:0;
  padding:0 20px;height:100%;
  border-right:1px solid var(--border);
  background:var(--bg2);
  flex-shrink:0;
}
.logo-bracket{
  font-family:var(--font-mono);font-size:20px;font-weight:600;
  color:var(--green);line-height:1;
}
.logo-name{
  font-family:var(--font-mono);font-size:13px;font-weight:500;
  color:var(--text);letter-spacing:1px;margin:0 4px;
}

/* Top tabs (like HackerRank nav) */
.header-tabs{
  display:flex;align-items:center;height:100%;
  padding:0 16px;gap:2px;
  border-right:1px solid var(--border);
}
.htab{
  display:flex;align-items:center;gap:7px;
  padding:0 14px;height:100%;
  font-family:var(--font-mono);font-size:11.5px;
  color:var(--text-2);cursor:pointer;
  border-bottom:2px solid transparent;
  transition:all .18s;letter-spacing:.3px;
  white-space:nowrap;
}
.htab:hover{color:var(--text);background:var(--panel);}
.htab.active{color:var(--green);border-bottom-color:var(--green);background:var(--green-dim);}
.htab .dot{width:5px;height:5px;border-radius:50%;background:currentColor;animation:blink 2s ease-in-out infinite;}
@keyframes blink{0%,100%{opacity:.3}50%{opacity:1}}

/* Right header controls */
.header-right{
  display:flex;align-items:center;gap:6px;
  margin-left:auto;padding:0 14px;
}
.hdr-btn{
  display:flex;align-items:center;gap:6px;
  padding:5px 12px;
  background:transparent;
  border:1px solid var(--border);
  color:var(--text-2);font-family:var(--font-mono);font-size:11px;
  cursor:pointer;transition:all .18s;letter-spacing:.5px;
  text-transform:uppercase;
}
.hdr-btn:hover{border-color:var(--green);color:var(--green);background:var(--green-dim);}
.hdr-btn.active{border-color:var(--green);color:var(--green);background:var(--green-dim);}
.hdr-btn.voice-on{border-color:var(--red);color:var(--red);background:rgba(248,81,73,.08);animation:recPulse 1.2s ease-in-out infinite;}
@keyframes recPulse{0%,100%{box-shadow:none}50%{box-shadow:0 0 10px rgba(248,81,73,.25)}}

/* User chip */
.user-chip{
  display:flex;align-items:center;gap:8px;
  padding:4px 10px;background:var(--panel);
  border:1px solid var(--border);cursor:pointer;
  transition:all .18s;
}
.user-chip:hover{border-color:var(--border-2);}
.uc-av{
  width:22px;height:22px;border-radius:50%;
  background:linear-gradient(135deg,var(--green-2),var(--green));
  display:flex;align-items:center;justify-content:center;
  font-size:10px;font-weight:700;color:#000;font-family:var(--font-mono);
  flex-shrink:0;
}
.uc-name{font-family:var(--font-mono);font-size:11px;color:var(--text);letter-spacing:.3px;}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   BODY LAYOUT
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.body-wrap{
  flex:1;display:flex;overflow:hidden;position:relative;z-index:1;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   LEFT ICON SIDEBAR
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.icon-sidebar{
  width:52px;flex-shrink:0;
  background:var(--bg2);
  border-right:1px solid var(--border);
  display:flex;flex-direction:column;
  align-items:center;padding:10px 0;gap:2px;
}
.isb-btn{
  width:38px;height:38px;
  display:flex;align-items:center;justify-content:center;
  font-size:16px;cursor:pointer;
  border:1px solid transparent;
  transition:all .18s;position:relative;
  color:var(--text-3);
}
.isb-btn:hover{background:var(--panel);border-color:var(--border);color:var(--text-2);}
.isb-btn.active{background:var(--green-dim);border-color:rgba(0,234,100,.3);color:var(--green);}
.isb-sep{width:28px;height:1px;background:var(--border);margin:6px 0;}
.isb-tooltip{
  position:absolute;left:calc(100% + 8px);
  background:var(--panel);border:1px solid var(--border);
  color:var(--text);font-family:var(--font-mono);font-size:10px;
  padding:4px 8px;white-space:nowrap;letter-spacing:.5px;
  opacity:0;pointer-events:none;transition:opacity .15s;
  z-index:200;
}
.isb-btn:hover .isb-tooltip{opacity:1;}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SIDE PANEL (slides in from left)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.side-panel{
  width:240px;flex-shrink:0;
  background:var(--bg2);
  border-right:1px solid var(--border);
  display:flex;flex-direction:column;
  overflow:hidden;
  transform:translateX(-100%);
  transition:transform .25s cubic-bezier(.4,0,.2,1);
  position:absolute;left:52px;top:0;bottom:0;z-index:50;
}
.side-panel.open{transform:translateX(0);}
.sp-header{
  padding:12px 14px 10px;
  border-bottom:1px solid var(--border);
  display:flex;align-items:center;justify-content:space-between;
}
.sp-title{
  font-family:var(--font-mono);font-size:10px;letter-spacing:2px;
  text-transform:uppercase;color:var(--green);
}
.sp-close{
  width:22px;height:22px;background:transparent;border:1px solid var(--border);
  color:var(--text-3);font-size:12px;cursor:pointer;display:flex;align-items:center;justify-content:center;
  transition:all .15s;
}
.sp-close:hover{border-color:var(--red);color:var(--red);}
.sp-body{flex:1;overflow-y:auto;padding:8px;}
.sp-body::-webkit-scrollbar{width:2px;}
.sp-body::-webkit-scrollbar-thumb{background:var(--border);}

.sp-label{
  font-family:var(--font-mono);font-size:9px;letter-spacing:2.5px;
  text-transform:uppercase;color:var(--text-3);
  padding:8px 6px 4px;
}
.sp-item{
  display:flex;align-items:center;gap:8px;
  padding:7px 8px;
  font-family:var(--font-mono);font-size:11px;color:var(--text-2);
  cursor:pointer;transition:all .18s;border-left:2px solid transparent;
  letter-spacing:.2px;
}
.sp-item:hover{color:var(--green);background:var(--green-dim);border-left-color:var(--green);}
.sp-item .ic{font-size:13px;width:16px;text-align:center;flex-shrink:0;}
.sp-badge{
  margin-left:auto;font-size:9px;padding:1px 5px;
  background:var(--lift);border:1px solid var(--border);
  color:var(--text-3);letter-spacing:.5px;font-family:var(--font-mono);
}
.sp-badge.on{color:var(--green);border-color:rgba(0,234,100,.3);background:var(--green-dim);}

.sp-convo{
  padding:7px 8px;font-family:var(--font-mono);font-size:11px;color:var(--text-3);
  cursor:pointer;border-left:2px solid transparent;transition:all .18s;
  white-space:nowrap;overflow:hidden;text-overflow:ellipsis;
}
.sp-convo:hover{color:var(--text);background:var(--panel);border-left-color:var(--border-2);}
.sp-convo.active{color:var(--green);background:var(--green-dim);border-left-color:var(--green);}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   MAIN CONTENT
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.main{
  flex:1;display:flex;flex-direction:column;overflow:hidden;
  position:relative;
}

/* Search bar */
.search-bar{
  position:absolute;top:0;left:0;right:0;z-index:60;
  background:var(--panel);border-bottom:1px solid var(--green);
  padding:0 16px;height:40px;
  display:flex;align-items:center;gap:10px;
  transform:translateY(-100%);transition:transform .2s;
}
.search-bar.open{transform:translateY(0);}
.sb-prefix{font-family:var(--font-mono);font-size:12px;color:var(--green);flex-shrink:0;letter-spacing:.5px;}
.sb-input{
  flex:1;background:transparent;border:none;outline:none;
  font-family:var(--font-mono);font-size:12px;color:var(--text);
  caret-color:var(--green);
}
.sb-input::placeholder{color:var(--text-3);}
.sb-meta{font-family:var(--font-mono);font-size:10px;color:var(--text-3);min-width:70px;text-align:right;letter-spacing:.5px;}
.sb-navs{display:flex;gap:4px;}
.sb-nav{
  width:24px;height:24px;background:transparent;border:1px solid var(--border);
  color:var(--text-2);cursor:pointer;font-size:11px;
  display:flex;align-items:center;justify-content:center;transition:all .15s;
  font-family:var(--font-mono);
}
.sb-nav:hover{border-color:var(--green);color:var(--green);}
.sb-esc{
  padding:3px 8px;background:transparent;border:1px solid var(--border);
  color:var(--text-3);font-size:10px;cursor:pointer;font-family:var(--font-mono);
  letter-spacing:1px;text-transform:uppercase;transition:all .15s;
}
.sb-esc:hover{border-color:var(--red);color:var(--red);}
mark.hl{background:rgba(0,234,100,.2);color:var(--green);padding:0 1px;}
mark.hl.cur{background:rgba(0,234,100,.45);color:#000;}

/* â”€â”€ PANEL HEADER (like HackerRank problem header) â”€â”€ */
.panel-header{
  padding:0 20px;height:40px;flex-shrink:0;
  display:flex;align-items:center;justify-content:space-between;
  background:var(--surface);border-bottom:1px solid var(--border);
}
.ph-left{display:flex;align-items:center;gap:12px;}
.ph-breadcrumb{
  font-family:var(--font-mono);font-size:11px;color:var(--text-3);
  letter-spacing:.3px;
}
.ph-breadcrumb span{color:var(--text-2);}
.ph-breadcrumb .sep{margin:0 4px;color:var(--text-3);}
.ph-tag{
  padding:2px 8px;background:var(--green-dim);
  border:1px solid rgba(0,234,100,.25);
  font-family:var(--font-mono);font-size:9px;letter-spacing:1.5px;
  text-transform:uppercase;color:var(--green);
}
.status-row{display:flex;align-items:center;gap:8px;}
.status-chip{
  display:flex;align-items:center;gap:5px;
  padding:2px 8px;border:1px solid var(--border);
  font-family:var(--font-mono);font-size:9.5px;color:var(--text-3);
  letter-spacing:.5px;text-transform:uppercase;
}
.status-chip .led{width:5px;height:5px;border-radius:50%;background:var(--green);animation:blink 2s ease-in-out infinite;}
.status-chip .led.red{background:var(--red);}
.status-chip .led.yellow{background:var(--yellow);}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   MESSAGES
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.msgs-scroll{
  flex:1;overflow-y:auto;
  padding:20px 0 8px;
}
.msgs-scroll::-webkit-scrollbar{width:4px;}
.msgs-scroll::-webkit-scrollbar-thumb{background:var(--border);border-radius:0;}
.msgs-inner{max-width:860px;margin:0 auto;padding:0 20px;}

/* Welcome screen */
.welcome{padding:40px 0;animation:fadeIn .5s ease both;}
@keyframes fadeIn{from{opacity:0;transform:translateY(12px)}to{opacity:1;transform:translateY(0)}}

.terminal-box{
  background:var(--surface);border:1px solid var(--border);
  margin-bottom:24px;
}
.tb-header{
  display:flex;align-items:center;gap:8px;
  padding:8px 14px;background:var(--panel);border-bottom:1px solid var(--border);
}
.tb-dot{width:11px;height:11px;border-radius:50%;}
.tb-dot-r{background:#ff5f57;}
.tb-dot-y{background:#febc2e;}
.tb-dot-g{background:#28c840;}
.tb-filename{
  font-family:var(--font-mono);font-size:11px;color:var(--text-3);
  margin-left:auto;letter-spacing:.5px;
}
.tb-body{padding:20px;}
.tb-line{
  font-family:var(--font-mono);font-size:13px;line-height:1.8;
  display:flex;gap:12px;
}
.tb-prompt{color:var(--green);flex-shrink:0;}
.tb-cmd{color:var(--text);}
.tb-out{color:var(--text-2);margin-left:0;padding-left:0;}
.tb-cursor{display:inline-block;width:8px;height:14px;background:var(--green);vertical-align:middle;animation:blinkCur .7s step-end infinite;}
@keyframes blinkCur{0%,100%{opacity:1}50%{opacity:0}}
.tb-comment{color:var(--text-3);}
.tb-string{color:var(--yellow);}
.tb-kw{color:var(--blue);}

/* Starter cards (like HackerRank challenge cards) */
.challenge-grid{
  display:grid;grid-template-columns:repeat(3,1fr);gap:12px;
  margin-top:20px;
}
.challenge-card{
  background:var(--surface);border:1px solid var(--border);
  padding:16px;cursor:pointer;transition:all .2s;position:relative;overflow:hidden;
}
.challenge-card::before{
  content:'';position:absolute;top:0;left:0;right:0;height:2px;
  background:var(--green);transform:scaleX(0);transform-origin:left;
  transition:transform .2s;
}
.challenge-card:hover{border-color:var(--border-2);background:var(--panel);}
.challenge-card:hover::before{transform:scaleX(1);}
.cc-tag{
  font-family:var(--font-mono);font-size:9px;letter-spacing:2px;
  text-transform:uppercase;color:var(--green);margin-bottom:6px;
}
.cc-title{
  font-family:var(--font-mono);font-size:13px;font-weight:500;
  color:var(--text);margin-bottom:4px;line-height:1.3;
}
.cc-sub{font-family:var(--font-ui);font-size:11px;color:var(--text-3);line-height:1.4;}
.cc-difficulty{
  display:inline-block;margin-top:8px;
  font-family:var(--font-mono);font-size:9px;letter-spacing:1px;
  padding:2px 7px;border:1px solid;text-transform:uppercase;
}
.cc-difficulty.easy{color:var(--green);border-color:rgba(0,234,100,.3);}
.cc-difficulty.medium{color:var(--yellow);border-color:rgba(240,192,64,.3);}
.cc-difficulty.hard{color:var(--red);border-color:rgba(248,81,73,.3);}

/* Messages */
.msg{
  display:flex;flex-direction:column;margin-bottom:16px;
  animation:fadeIn .25s ease both;
}
.msg-header{
  display:flex;align-items:center;gap:10px;margin-bottom:6px;
}
.msg-role{
  font-family:var(--font-mono);font-size:10px;letter-spacing:2px;
  text-transform:uppercase;font-weight:500;
}
.msg.ai .msg-role{color:var(--green);}
.msg.user .msg-role{color:var(--blue);}
.msg-time{
  font-family:var(--font-mono);font-size:9px;color:var(--text-3);
  letter-spacing:.5px;
}
.msg-tag{
  font-family:var(--font-mono);font-size:9px;letter-spacing:1px;
  padding:1px 6px;text-transform:uppercase;
}
.msg.ai .msg-tag{background:var(--green-dim);color:var(--green);border:1px solid rgba(0,234,100,.2);}
.msg.user .msg-tag{background:rgba(88,166,255,.08);color:var(--blue);border:1px solid rgba(88,166,255,.2);}

.msg-bubble{
  font-family:var(--font-ui);font-size:14px;line-height:1.72;
  color:var(--text);font-weight:300;
  padding-left:16px;
}
.msg.ai .msg-bubble{border-left:2px solid var(--green);}
.msg.user .msg-bubble{
  border-left:2px solid var(--blue);
  color:var(--text-2);
  font-family:var(--font-mono);font-size:13px;
}
.msg.ai .msg-bubble code{
  font-family:var(--font-mono);font-size:12px;
  background:var(--panel);border:1px solid var(--border);
  padding:1px 6px;color:var(--yellow);
}
.msg.ai .msg-bubble pre{
  font-family:var(--font-mono);font-size:12px;
  background:var(--bg);border:1px solid var(--border);
  border-left:3px solid var(--green);
  padding:14px 16px;overflow-x:auto;margin:10px 0;
  line-height:1.6;color:var(--text-2);
}
.msg.ai .msg-bubble strong{color:var(--green);font-weight:600;}

.msg-acts{
  display:flex;gap:6px;padding-left:16px;margin-top:6px;
  opacity:0;transition:opacity .15s;
}
.msg:hover .msg-acts{opacity:1;}
.m-btn{
  padding:3px 9px;background:transparent;border:1px solid var(--border);
  color:var(--text-3);font-family:var(--font-mono);font-size:10px;
  cursor:pointer;transition:all .15s;letter-spacing:.3px;text-transform:uppercase;
}
.m-btn:hover{border-color:var(--green);color:var(--green);background:var(--green-dim);}

/* Thinking indicator */
.thinking-msg{display:flex;flex-direction:column;margin-bottom:16px;}
.thinking-bar{
  padding:10px 16px;border-left:2px solid var(--green);
  background:var(--green-dim);
  font-family:var(--font-mono);font-size:11px;color:var(--green);
  letter-spacing:1px;display:flex;align-items:center;gap:10px;
}
.thinking-dots{display:flex;gap:4px;}
.td{
  width:5px;height:5px;background:var(--green);
  animation:tdBounce .7s ease-in-out infinite;
}
.td:nth-child(2){animation-delay:.14s;}
.td:nth-child(3){animation-delay:.28s;}
@keyframes tdBounce{0%,100%{transform:scaleY(.4);opacity:.3}50%{transform:scaleY(1);opacity:1}}

/* Typewriter cursor */
.tw-cur{
  display:inline-block;width:8px;height:13px;
  background:var(--green);vertical-align:middle;margin-left:2px;
  animation:blinkCur .65s step-end infinite;
}

/* Typing hint */
.typing-hint{
  height:22px;padding:0 20px;
  display:flex;align-items:center;gap:8px;
  font-family:var(--font-mono);font-size:10px;color:var(--text-3);
  letter-spacing:.5px;opacity:0;transition:opacity .2s;
}
.typing-hint.vis{opacity:1;}
.typing-hint::before{content:'> ';color:var(--green);}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   INPUT ZONE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.input-zone{
  padding:10px 20px 12px;
  background:var(--bg2);
  border-top:1px solid var(--border);
}
.input-inner{max-width:860px;margin:0 auto;}

/* Quick actions */
.qa-row{display:flex;gap:6px;flex-wrap:wrap;margin-bottom:8px;}
.qa-chip{
  padding:3px 10px;background:var(--panel);border:1px solid var(--border);
  color:var(--text-3);font-family:var(--font-mono);font-size:10px;
  cursor:pointer;transition:all .15s;letter-spacing:.5px;text-transform:uppercase;
}
.qa-chip:hover{border-color:var(--green);color:var(--green);background:var(--green-dim);}

/* Input box */
.input-box{
  background:var(--surface);border:1px solid var(--border);
  transition:border-color .2s;
}
.input-box:focus-within{border-color:var(--green);box-shadow:var(--green-glow);}
.input-box.recording{border-color:var(--red);box-shadow:0 0 18px rgba(248,81,73,.2);animation:recPulse 1.2s ease-in-out infinite;}

.input-top{
  display:flex;align-items:flex-start;gap:0;
  padding:10px 14px 8px;
}
.input-prompt{
  font-family:var(--font-mono);font-size:13px;color:var(--green);
  flex-shrink:0;margin-right:10px;margin-top:2px;font-weight:500;
  letter-spacing:.5px;
}
textarea#msgIn{
  flex:1;background:transparent;border:none;outline:none;
  color:var(--text);font-family:var(--font-mono);font-size:13px;
  line-height:1.6;resize:none;min-height:22px;max-height:140px;
  caret-color:var(--green);
}
textarea#msgIn::placeholder{color:var(--text-3);}
.input-bot{
  display:flex;align-items:center;justify-content:space-between;
  padding:6px 14px 8px;border-top:1px solid var(--border);
}
.ib-left{display:flex;gap:6px;}
.ib-btn{
  display:flex;align-items:center;gap:5px;
  padding:4px 9px;background:transparent;border:1px solid var(--border);
  color:var(--text-3);font-family:var(--font-mono);font-size:10px;
  cursor:pointer;transition:all .15s;letter-spacing:.5px;text-transform:uppercase;
}
.ib-btn:hover{border-color:var(--border-2);color:var(--text-2);}
.ib-btn.mic{color:var(--text-3);}
.ib-btn.mic:hover{border-color:var(--red);color:var(--red);}
.ib-btn.mic.on{border-color:var(--red);color:var(--red);background:rgba(248,81,73,.08);animation:recPulse 1s ease-in-out infinite;}
.char-ct{font-family:var(--font-mono);font-size:10px;color:var(--text-3);letter-spacing:.5px;}
.char-ct.warn{color:var(--red);}
.btn-send{
  display:flex;align-items:center;gap:6px;
  padding:5px 16px;background:var(--green);border:none;
  color:#000;font-family:var(--font-mono);font-size:11px;font-weight:600;
  cursor:pointer;transition:all .2s;letter-spacing:1px;text-transform:uppercase;
}
.btn-send:hover{background:#1fff7a;box-shadow:var(--green-glow);}
.btn-send:active{transform:scale(.98);}
.input-hint{
  font-family:var(--font-mono);font-size:9.5px;color:var(--text-3);
  margin-top:6px;letter-spacing:.3px;
}
.input-hint kbd{
  background:var(--panel);border:1px solid var(--border);
  padding:1px 4px;color:var(--text-2);font-family:var(--font-mono);font-size:9px;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   STATUS BAR (VSCode-style bottom)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.status-bar{
  height:24px;flex-shrink:0;
  display:flex;align-items:center;
  background:var(--green);
  padding:0 12px;gap:0;
  z-index:100;position:relative;
}
.sb-seg{
  display:flex;align-items:center;gap:5px;
  padding:0 10px;height:100%;
  font-family:var(--font-mono);font-size:10px;font-weight:600;color:#000;
  letter-spacing:.5px;cursor:default;white-space:nowrap;
  border-right:1px solid rgba(0,0,0,.12);
}
.sb-seg:first-child{border-left:none;}
.sb-seg:hover{background:rgba(0,0,0,.08);}
.sb-seg-right{margin-left:auto;border-right:none;border-left:1px solid rgba(0,0,0,.12);}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   VOICE OVERLAY â€” Terminal Style
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.voice-overlay{
  position:fixed;inset:0;z-index:500;
  background:rgba(5,8,12,.97);
  display:flex;flex-direction:column;align-items:center;justify-content:center;
  opacity:0;pointer-events:none;
  transition:opacity .3s;
  font-family:var(--font-mono);
}
.voice-overlay.open{opacity:1;pointer-events:all;}

/* Terminal window */
.voice-terminal{
  width:640px;max-width:90vw;
  background:var(--surface);border:1px solid var(--border);
}
.vt-header{
  display:flex;align-items:center;gap:8px;
  padding:9px 14px;background:var(--panel);border-bottom:1px solid var(--border);
}
.vt-title{font-size:11px;color:var(--text-3);letter-spacing:1.5px;text-transform:uppercase;flex:1;text-align:center;}
.vt-close{
  width:22px;height:22px;background:transparent;border:1px solid var(--border);
  color:var(--text-3);font-size:12px;cursor:pointer;
  display:flex;align-items:center;justify-content:center;
  transition:all .15s;font-family:var(--font-mono);margin-left:auto;
}
.vt-close:hover{border-color:var(--red);color:var(--red);}
.vt-body{padding:24px;}

/* Circular visualizer */
.voice-vis{
  display:flex;flex-direction:column;align-items:center;gap:20px;
  margin-bottom:24px;
}
.vis-ring{
  width:120px;height:120px;border-radius:50%;
  border:2px solid var(--border);
  display:flex;align-items:center;justify-content:center;
  position:relative;transition:border-color .3s;
}
.vis-ring::before{
  content:'';position:absolute;inset:-8px;border-radius:50%;
  border:1px solid transparent;transition:all .3s;
}
.vis-ring.idle{border-color:var(--border);}
.vis-ring.listening{border-color:var(--red);box-shadow:0 0 20px rgba(248,81,73,.2),0 0 60px rgba(248,81,73,.08);}
.vis-ring.listening::before{border-color:rgba(248,81,73,.2);animation:ringPulse 1.2s ease-in-out infinite;}
.vis-ring.speaking{border-color:var(--blue);box-shadow:0 0 20px rgba(88,166,255,.2);}
.vis-ring.speaking::before{border-color:rgba(88,166,255,.2);animation:ringPulse .8s ease-in-out infinite;}
.vis-ring.processing{border-color:var(--green);box-shadow:0 0 20px rgba(0,234,100,.2);}
.vis-ring.processing::before{border-color:rgba(0,234,100,.2);animation:ringPulse 1.5s ease-in-out infinite;}
@keyframes ringPulse{0%,100%{transform:scale(1);opacity:.5}50%{transform:scale(1.06);opacity:1}}
.vis-icon{font-size:36px;transition:all .3s;}

/* Waveform bars */
.waveform{
  display:flex;align-items:center;gap:3px;height:36px;
}
.wb{
  width:3px;background:var(--border);border-radius:2px;
  transition:background .3s;
}
.waveform.listening .wb{
  background:var(--red);
  animation:wbBounce .5s ease-in-out infinite alternate;
}
.waveform.speaking .wb{
  background:var(--blue);
  animation:wbBounce .4s ease-in-out infinite alternate;
}
.wb:nth-child(1){height:6px;animation-delay:0s;}
.wb:nth-child(2){height:14px;animation-delay:.06s;}
.wb:nth-child(3){height:22px;animation-delay:.12s;}
.wb:nth-child(4){height:30px;animation-delay:.18s;}
.wb:nth-child(5){height:36px;animation-delay:.24s;}
.wb:nth-child(6){height:30px;animation-delay:.3s;}
.wb:nth-child(7){height:22px;animation-delay:.36s;}
.wb:nth-child(8){height:14px;animation-delay:.42s;}
.wb:nth-child(9){height:6px;animation-delay:.48s;}
@keyframes wbBounce{from{transform:scaleY(.2)}to{transform:scaleY(1)}}

/* Voice transcript */
.vt-status-label{
  font-size:10px;letter-spacing:2.5px;text-transform:uppercase;
  text-align:center;margin-bottom:8px;transition:color .3s;
}
.vt-status-label.idle{color:var(--text-3);}
.vt-status-label.listening{color:var(--red);}
.vt-status-label.speaking{color:var(--blue);}
.vt-status-label.processing{color:var(--green);}

.vt-transcript{
  background:var(--bg);border:1px solid var(--border);
  border-left:3px solid var(--text-3);
  padding:12px 16px;min-height:56px;
  font-size:13px;color:var(--text-2);line-height:1.6;
  margin-bottom:16px;transition:border-color .3s;
  letter-spacing:.2px;
}
.vt-transcript.listening{border-left-color:var(--red);color:var(--text);}
.vt-transcript.speaking{border-left-color:var(--blue);}
.vt-transcript.processing{border-left-color:var(--green);}

/* Voice controls */
.vt-controls{display:flex;gap:8px;justify-content:center;}
.vt-btn{
  padding:8px 20px;background:transparent;border:1px solid var(--border);
  color:var(--text-2);font-family:var(--font-mono);font-size:11px;
  cursor:pointer;transition:all .2s;letter-spacing:1px;text-transform:uppercase;
}
.vt-btn:hover{border-color:var(--border-2);color:var(--text);}
.vt-btn.primary{background:var(--green);border-color:var(--green);color:#000;font-weight:600;}
.vt-btn.primary:hover{background:#1fff7a;}
.vt-btn.stop{border-color:var(--red);color:var(--red);}
.vt-btn.stop:hover{background:rgba(248,81,73,.08);}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   MODALS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.modal-bg{
  position:fixed;inset:0;background:rgba(0,0,0,.7);
  backdrop-filter:blur(4px);z-index:300;
  display:flex;align-items:center;justify-content:center;
  opacity:0;pointer-events:none;transition:opacity .2s;
}
.modal-bg.open{opacity:1;pointer-events:all;}
.modal{
  width:460px;max-width:92vw;
  background:var(--surface);border:1px solid var(--border);
  transform:scale(.97);transition:transform .2s;
  box-shadow:0 20px 60px rgba(0,0,0,.6);
}
.modal-bg.open .modal{transform:scale(1);}
.modal-title-bar{
  display:flex;align-items:center;justify-content:space-between;
  padding:10px 16px;background:var(--panel);border-bottom:1px solid var(--border);
}
.modal-title{font-family:var(--font-mono);font-size:12px;letter-spacing:1.5px;text-transform:uppercase;color:var(--text);}
.modal-x{
  width:22px;height:22px;background:transparent;border:1px solid var(--border);
  color:var(--text-3);font-size:12px;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .15s;
}
.modal-x:hover{border-color:var(--red);color:var(--red);}
.modal-body{padding:20px;}
.m-field{margin-bottom:12px;}
.m-label{
  font-family:var(--font-mono);font-size:9px;letter-spacing:2px;
  text-transform:uppercase;color:var(--text-3);margin-bottom:4px;
}
.m-input{
  width:100%;background:var(--bg);border:1px solid var(--border);
  padding:8px 10px;color:var(--text);font-family:var(--font-mono);font-size:12px;
  outline:none;transition:border-color .2s;caret-color:var(--green);
  letter-spacing:.2px;
}
.m-input:focus{border-color:var(--green);}
.m-input::placeholder{color:var(--text-3);}
.modal-footer{
  display:flex;gap:8px;justify-content:flex-end;
  padding:12px 16px;border-top:1px solid var(--border);background:var(--panel);
}
.modal-btn{
  padding:6px 16px;background:transparent;border:1px solid var(--border);
  color:var(--text-2);font-family:var(--font-mono);font-size:11px;
  cursor:pointer;transition:all .18s;letter-spacing:.5px;text-transform:uppercase;
}
.modal-btn:hover{border-color:var(--border-2);color:var(--text);}
.modal-btn.save{background:var(--green);border-color:var(--green);color:#000;font-weight:600;}
.modal-btn.save:hover{background:#1fff7a;}
.modal-res{max-height:200px;overflow-y:auto;}
.res-item{
  padding:8px 10px;border:1px solid var(--border);background:var(--bg);
  cursor:pointer;margin-bottom:4px;transition:all .15s;border-left:2px solid transparent;
}
.res-item:hover{border-left-color:var(--green);background:var(--panel);}
.res-tag{font-family:var(--font-mono);font-size:9px;letter-spacing:1px;text-transform:uppercase;color:var(--green);margin-bottom:2px;}
.res-name{font-family:var(--font-mono);font-size:12px;color:var(--text);}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   TOAST
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.toast{
  position:fixed;bottom:36px;left:50%;transform:translateX(-50%) translateY(16px);
  background:var(--panel);border:1px solid var(--border);border-left:3px solid var(--green);
  padding:9px 16px;font-family:var(--font-mono);font-size:11px;color:var(--text);
  opacity:0;transition:all .3s;pointer-events:none;letter-spacing:.5px;
  z-index:9999;white-space:nowrap;
}
.toast.show{opacity:1;transform:translateX(-50%) translateY(0);}
.toast.r{border-left-color:var(--red);color:var(--red);}
.toast.g{border-left-color:var(--green);color:var(--green);}
.toast.b{border-left-color:var(--blue);color:var(--blue);}
.toast.y{border-left-color:var(--yellow);color:var(--yellow);}

@media(max-width:700px){
  .icon-sidebar{display:none;}
  .challenge-grid{grid-template-columns:1fr;}
  .msgs-inner{padding:0 12px;}
  .input-zone{padding:8px 12px 10px;}
  .status-bar .sb-seg:nth-child(n+4){display:none;}
}
</style>
</head>
<body>

<!-- â•â•â•â• HEADER â•â•â•â• -->
<div class="header">
  <div class="header-logo">
    <span class="logo-bracket">{</span>
    <span class="logo-name">PROFESSOR</span>
    <span class="logo-bracket">}</span>
  </div>

  <div class="header-tabs">
    <div class="htab active">
      <div class="dot" style="background:var(--green)"></div>
      Chat
    </div>
    <div class="htab" onclick="openPDF()">Docs</div>
    <div class="htab" onclick="openImg()">Images</div>
    <div class="htab" onclick="newChat()">+ New</div>
  </div>

  <div class="header-right">
    <button class="hdr-btn" id="twBtn" onclick="toggleTW()">âŒ¨ Typewriter</button>
    <button class="hdr-btn" id="asBtn" onclick="toggleAS()">ğŸ”Š Auto-speak</button>
    <button class="hdr-btn" onclick="toggleSearch()">
      <svg width="11" height="11" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg>
      Search
    </button>
    <button class="hdr-btn" id="voiceHdrBtn" onclick="openVoice()">ğŸ¤ Voice</button>
    <div class="user-chip" onclick="openProfile()">
      <div class="uc-av" id="ucAv">G</div>
      <span class="uc-name" id="ucName">GUEST</span>
    </div>
  </div>
</div>

<!-- â•â•â•â• BODY â•â•â•â• -->
<div class="body-wrap">

  <!-- Icon sidebar -->
  <div class="icon-sidebar">
    <div class="isb-btn" onclick="togglePanel('menu')" title="">
      â˜°<span class="isb-tooltip">MENU</span>
    </div>
    <div class="isb-btn active" onclick="togglePanel('chat')" title="">
      ğŸ’¬<span class="isb-tooltip">CHAT</span>
    </div>
    <div class="isb-sep"></div>
    <div class="isb-btn" onclick="toggleSearch()">
      ğŸ”<span class="isb-tooltip">SEARCH [âŒ˜F]</span>
    </div>
    <div class="isb-btn" onclick="openVoice()">
      ğŸ¤<span class="isb-tooltip">VOICE MODE</span>
    </div>
    <div class="isb-btn" onclick="openPDF()">
      ğŸ“„<span class="isb-tooltip">PDF SEARCH</span>
    </div>
    <div class="isb-btn" onclick="openImg()">
      ğŸ–¼<span class="isb-tooltip">IMAGE SEARCH</span>
    </div>
    <div class="isb-sep"></div>
    <div class="isb-btn" onclick="toggleTW()">
      âŒ¨<span class="isb-tooltip">TYPEWRITER</span>
    </div>
    <div class="isb-btn" onclick="openProfile()">
      ğŸ‘¤<span class="isb-tooltip">PROFILE</span>
    </div>
    <div class="isb-btn" style="margin-top:auto;" onclick="clearChat()">
      ğŸ—‘<span class="isb-tooltip">CLEAR CHAT</span>
    </div>
  </div>

  <!-- Slide-in side panel -->
  <div class="side-panel" id="sidePanel">
    <div class="sp-header">
      <span class="sp-title">Navigator</span>
      <button class="sp-close" onclick="closePanel()">âœ•</button>
    </div>
    <div class="sp-body">
      <div class="sp-label">// Conversations</div>
      <div class="sp-convo active">session_001.log</div>
      <div class="sp-convo" style="opacity:.35;pointer-events:none">history.log</div>

      <div class="sp-label" style="margin-top:12px;">// Tools</div>
      <div class="sp-item" onclick="toggleSearch();closePanel()"><span class="ic">ğŸ”</span>Search <span style="margin-left:auto;font-size:9px;color:var(--text-3)">âŒ˜F</span></div>
      <div class="sp-item" onclick="openVoice();closePanel()"><span class="ic">ğŸ¤</span>Voice mode</div>
      <div class="sp-item" onclick="openPDF();closePanel()"><span class="ic">ğŸ“„</span>PDF search</div>
      <div class="sp-item" onclick="openImg();closePanel()"><span class="ic">ğŸ–¼</span>Image search</div>
      <div class="sp-item" onclick="clearChat();closePanel()"><span class="ic">ğŸ—‘</span>Clear chat</div>

      <div class="sp-label" style="margin-top:12px;">// Settings</div>
      <div class="sp-item" id="spTwItem" onclick="toggleTW()">
        <span class="ic">âŒ¨</span>Typewriter<span class="sp-badge" id="twBadge">OFF</span>
      </div>
      <div class="sp-item" id="spAsItem" onclick="toggleAS()">
        <span class="ic">ğŸ”Š</span>Auto-speak<span class="sp-badge" id="asBadge">OFF</span>
      </div>
      <div class="sp-item" onclick="openProfile();closePanel()"><span class="ic">ğŸ‘¤</span>Edit profile</div>
    </div>
  </div>

  <!-- Main content -->
  <div class="main">

    <!-- Search bar -->
    <div class="search-bar" id="searchBar">
      <span class="sb-prefix">SEARCH:</span>
      <input class="sb-input" id="sbIn" placeholder="type to search messages..." oninput="doSearch()" onkeydown="sNav(event)" autocomplete="off" spellcheck="false">
      <span class="sb-meta" id="sbMeta">â€”</span>
      <div class="sb-navs">
        <button class="sb-nav" onclick="navSearch(-1)">â†‘</button>
        <button class="sb-nav" onclick="navSearch(1)">â†“</button>
      </div>
      <button class="sb-esc" onclick="closeSearch()">ESC</button>
    </div>

    <!-- Panel header -->
    <div class="panel-header">
      <div class="ph-left">
        <div class="ph-breadcrumb">
          professor<span class="sep">/</span><span id="sessionLabel">session_001</span>
        </div>
        <div class="ph-tag">AI CHAT</div>
      </div>
      <div class="status-row">
        <div class="status-chip"><div class="led"></div>ONLINE</div>
        <div class="status-chip" id="twChip" style="display:none"><div class="led yellow"></div>TYPEWRITER</div>
        <div class="status-chip" id="voiceChip" style="display:none"><div class="led red"></div>LISTENING</div>
      </div>
    </div>

    <!-- Messages -->
    <div class="msgs-scroll" id="msgsScroll">
      <div class="msgs-inner" id="msgs">

        <!-- Welcome terminal -->
        <div class="welcome" id="welcomeEl">
          <div class="terminal-box">
            <div class="tb-header">
              <div class="tb-dot tb-dot-r"></div>
              <div class="tb-dot tb-dot-y"></div>
              <div class="tb-dot tb-dot-g"></div>
              <span class="tb-filename">professor_ai.sh</span>
            </div>
            <div class="tb-body">
              <div class="tb-line"><span class="tb-prompt">$</span><span class="tb-cmd"> professor <span class="tb-string">--init</span> <span class="tb-string">--mode</span>=<span class="tb-kw">interactive</span></span></div>
              <div class="tb-line"><span class="tb-prompt" style="opacity:0">$</span><span class="tb-out">Initialising Professor AI... <span style="color:var(--green)">âœ“</span></span></div>
              <div class="tb-line"><span class="tb-prompt" style="opacity:0">$</span><span class="tb-out">Loading knowledge base... <span style="color:var(--green)">âœ“</span></span></div>
              <div class="tb-line"><span class="tb-prompt" style="opacity:0">$</span><span class="tb-out">Voice recognition... <span style="color:var(--green)">âœ“</span></span></div>
              <div class="tb-line" style="margin-top:8px;"><span class="tb-prompt">$</span><span class="tb-cmd"> <span class="tb-comment"># Type a question or click a challenge below</span></span></div>
              <div class="tb-line"><span class="tb-prompt">$</span><span style="color:var(--text-2);"> Ready. Waiting for input </span><span class="tb-cursor"></span></div>
            </div>
          </div>

          <div class="challenge-grid">
            <div class="challenge-card" onclick="qCmd('Explain quantum computing simply')">
              <div class="cc-tag">// Concept</div>
              <div class="cc-title">Quantum Computing</div>
              <div class="cc-sub">Superposition, qubits, and why it matters</div>
              <div class="cc-difficulty easy">Easy</div>
            </div>
            <div class="challenge-card" onclick="qCmd('Write a professional email about a project delay')">
              <div class="cc-tag">// Output</div>
              <div class="cc-title">Draft an Email</div>
              <div class="cc-sub">Professional communication, any context</div>
              <div class="cc-difficulty medium">Medium</div>
            </div>
            <div class="challenge-card" onclick="qCmd('What are the latest trends in AI research?')">
              <div class="cc-tag">// Research</div>
              <div class="cc-title">AI Trends 2025</div>
              <div class="cc-sub">Latest breakthroughs and research directions</div>
              <div class="cc-difficulty hard">Advanced</div>
            </div>
            <div class="challenge-card" onclick="qCmd('What time is it and what is today\\'s date?')">
              <div class="cc-tag">// System</div>
              <div class="cc-title">Date & Time</div>
              <div class="cc-sub">Current system time and date</div>
              <div class="cc-difficulty easy">Easy</div>
            </div>
            <div class="challenge-card" onclick="qCmd('Tell me a programming joke')">
              <div class="cc-tag">// Fun</div>
              <div class="cc-title">Programmer Joke</div>
              <div class="cc-sub">Nerdy humor for coders</div>
              <div class="cc-difficulty easy">Easy</div>
            </div>
            <div class="challenge-card" onclick="qCmd('Write a Python function to find prime numbers')">
              <div class="cc-tag">// Code</div>
              <div class="cc-title">Prime Numbers</div>
              <div class="cc-sub">Python function with explanation</div>
              <div class="cc-difficulty medium">Medium</div>
            </div>
          </div>
        </div>

      </div>
    </div>

    <!-- Typing hint -->
    <div class="typing-hint" id="typHint">typing...</div>

    <!-- Input -->
    <div class="input-zone">
      <div class="input-inner">
        <div class="qa-row" id="qaRow">
          <span class="qa-chip" onclick="qCmd('What time is it?')">time()</span>
          <span class="qa-chip" onclick="qCmd('Tell me a programming joke')">joke()</span>
          <span class="qa-chip" onclick="qCmd('Explain machine learning')">explain("ML")</span>
          <span class="qa-chip" onclick="qCmd('Write a Python function to sort a list')">code("sort")</span>
          <span class="qa-chip" onclick="qCmd('Search PDF on algorithms')">pdf.search()</span>
        </div>
        <div class="input-box" id="inputBox">
          <div class="input-top">
            <span class="input-prompt">&gt;&gt;</span>
            <textarea id="msgIn" placeholder="enter your query..." rows="1"
              onkeydown="kDown(event)" oninput="onInp(event)"></textarea>
          </div>
          <div class="input-bot">
            <div class="ib-left">
              <button class="ib-btn mic" id="micBtn" onclick="openVoice()">ğŸ¤ Voice</button>
              <button class="ib-btn" onclick="clearIn()">âœ• Clear</button>
            </div>
            <div style="display:flex;align-items:center;gap:10px;">
              <span class="char-ct" id="charCt"></span>
              <button class="btn-send" onclick="sendMsg()">
                â–¶ RUN
              </button>
            </div>
          </div>
        </div>
        <div class="input-hint">
          <kbd>Enter</kbd> run &nbsp;Â·&nbsp; <kbd>Shift+Enter</kbd> newline &nbsp;Â·&nbsp; <kbd>âŒ˜F</kbd> search &nbsp;Â·&nbsp; <kbd>ğŸ¤</kbd> voice mode
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Status bar -->
<div class="status-bar">
  <div class="sb-seg">âš¡ PROFESSOR AI</div>
  <div class="sb-seg" id="sbSession">SESSION: #001</div>
  <div class="sb-seg" id="sbMsgCount">MESSAGES: 0</div>
  <div class="sb-seg" id="sbTwSeg">TYPEWRITER: OFF</div>
  <div class="sb-seg sb-seg-right" id="sbTime">--:--:--</div>
  <div class="sb-seg sb-seg-right">UTF-8</div>
  <div class="sb-seg sb-seg-right">TERMINAL</div>
</div>

<!-- â•â•â•â• VOICE OVERLAY â•â•â•â• -->
<div class="voice-overlay" id="voiceOverlay">
  <div class="voice-terminal">
    <div class="vt-header">
      <div class="tb-dot tb-dot-r"></div>
      <div class="tb-dot tb-dot-y"></div>
      <div class="tb-dot tb-dot-g"></div>
      <span class="vt-title">VOICE_MODE.sh â€” Professor Terminal</span>
      <button class="vt-close" onclick="closeVoice()">âœ•</button>
    </div>
    <div class="vt-body">
      <div class="voice-vis">
        <div class="vis-ring idle" id="visRing">
          <span class="vis-icon" id="visIcon">ğŸ“</span>
        </div>
        <div class="waveform" id="vWave">
          <div class="wb"></div><div class="wb"></div><div class="wb"></div>
          <div class="wb"></div><div class="wb"></div><div class="wb"></div>
          <div class="wb"></div><div class="wb"></div><div class="wb"></div>
        </div>
      </div>

      <div class="vt-status-label idle" id="vStatusLabel">IDLE</div>
      <div class="vt-transcript idle" id="vTranscript">
        <span style="color:var(--text-3);"># Click START to begin voice input. Professor will listen, then reply out loud.</span>
      </div>

      <div class="vt-controls" id="vControls">
        <button class="vt-btn stop" id="vStopBtn" onclick="stopSpeak()" style="display:none">â¹ STOP SPEAKING</button>
        <button class="vt-btn primary" id="vMicBtn" onclick="startListening()">ğŸ¤ START LISTENING</button>
        <button class="vt-btn" onclick="closeVoice()">CLOSE</button>
      </div>
    </div>
  </div>
</div>

<!-- PROFILE MODAL -->
<div class="modal-bg" id="profileModal">
  <div class="modal">
    <div class="modal-title-bar">
      <span class="modal-title">// Edit Profile</span>
      <button class="modal-x" onclick="closeModal('profileModal')">âœ•</button>
    </div>
    <div class="modal-body">
      <div class="m-field"><div class="m-label">Name</div><input class="m-input" id="mName" placeholder="e.g. Alan Turing"></div>
      <div class="m-field"><div class="m-label">Role</div><input class="m-input" id="mRole" placeholder="e.g. Software Engineer"></div>
      <div class="m-field"><div class="m-label">Location</div><input class="m-input" id="mLoc" placeholder="e.g. Mumbai, India"></div>
      <div class="m-field"><div class="m-label">Interests</div><input class="m-input" id="mInt" placeholder="e.g. Algorithms, ML, DSA"></div>
    </div>
    <div class="modal-footer">
      <button class="modal-btn" onclick="closeModal('profileModal')">Cancel</button>
      <button class="modal-btn save" onclick="saveProfile()">Save Profile</button>
    </div>
  </div>
</div>

<!-- PDF MODAL -->
<div class="modal-bg" id="pdfModal">
  <div class="modal">
    <div class="modal-title-bar">
      <span class="modal-title">// PDF Search</span>
      <button class="modal-x" onclick="closeModal('pdfModal')">âœ•</button>
    </div>
    <div class="modal-body">
      <div class="m-field"><div class="m-label">Query</div><input class="m-input" id="pdfQ" placeholder="e.g. Dynamic programming, Graph theory..." onkeydown="if(event.key==='Enter')doPDF()"></div>
      <div class="modal-res" id="pdfRes"></div>
    </div>
    <div class="modal-footer">
      <button class="modal-btn" onclick="closeModal('pdfModal')">Close</button>
      <button class="modal-btn save" onclick="doPDF()">â–¶ Search</button>
    </div>
  </div>
</div>

<!-- IMG MODAL -->
<div class="modal-bg" id="imgModal">
  <div class="modal">
    <div class="modal-title-bar">
      <span class="modal-title">// Image Search</span>
      <button class="modal-x" onclick="closeModal('imgModal')">âœ•</button>
    </div>
    <div class="modal-body">
      <div class="m-field"><div class="m-label">Query</div><input class="m-input" id="imgQ" placeholder="e.g. Binary tree, Neural network diagram..." onkeydown="if(event.key==='Enter')doImg()"></div>
      <div class="modal-res" id="imgRes"></div>
    </div>
    <div class="modal-footer">
      <button class="modal-btn" onclick="closeModal('imgModal')">Close</button>
      <button class="modal-btn save" onclick="doImg()">â–¶ Search</button>
    </div>
  </div>
</div>

<div class="toast" id="toast"></div>

<script>
/* â•â•â•â• CLOCK â•â•â•â• */
function tickClock(){ document.getElementById('sbTime').textContent = new Date().toLocaleTimeString('en-US',{hour12:false}); }
tickClock(); setInterval(tickClock, 1000);

/* â•â•â•â• PROFILE â•â•â•â• */
let profile = JSON.parse(localStorage.getItem('prof_hr_profile')||'{}');
let msgCount=0, sessionNum=1;
function updateProfileUI(){
  if(profile.name){
    document.getElementById('ucAv').textContent = profile.name[0].toUpperCase();
    document.getElementById('ucName').textContent = profile.name.toUpperCase();
  }
}
updateProfileUI();
function openProfile(){ document.getElementById('mName').value=profile.name||''; document.getElementById('mRole').value=profile.role||''; document.getElementById('mLoc').value=profile.loc||''; document.getElementById('mInt').value=profile.int||''; openModal('profileModal'); }
function saveProfile(){ profile={name:document.getElementById('mName').value.trim(),role:document.getElementById('mRole').value.trim(),loc:document.getElementById('mLoc').value.trim(),int:document.getElementById('mInt').value.trim()}; localStorage.setItem('prof_hr_profile',JSON.stringify(profile)); updateProfileUI(); closeModal('profileModal'); toast('// profile updated','g'); }

/* â•â•â•â• MODALS â•â•â•â• */
function openModal(id){ document.getElementById(id).classList.add('open'); }
function closeModal(id){ document.getElementById(id).classList.remove('open'); }
document.querySelectorAll('.modal-bg').forEach(m=>m.addEventListener('click',e=>{if(e.target===m)m.classList.remove('open');}));

/* â•â•â•â• SIDE PANEL â•â•â•â• */
let panelOpen=false;
function togglePanel(){ panelOpen=!panelOpen; document.getElementById('sidePanel').classList.toggle('open',panelOpen); }
function closePanel(){ panelOpen=false; document.getElementById('sidePanel').classList.remove('open'); }

/* â•â•â•â• TYPEWRITER â•â•â•â• */
let twOn=false;
function toggleTW(){
  twOn=!twOn;
  document.getElementById('twBtn').classList.toggle('active',twOn);
  document.getElementById('spTwItem').classList.toggle('active',twOn);
  const b=document.getElementById('twBadge'); b.textContent=twOn?'ON':'OFF'; b.classList.toggle('on',twOn);
  document.getElementById('sbTwSeg').textContent='TYPEWRITER: '+(twOn?'ON':'OFF');
  document.getElementById('twChip').style.display=twOn?'flex':'none';
  toast(twOn?'// typewriter: enabled':'// typewriter: disabled');
}
function typewrite(el, html, spd=12){
  return new Promise(res=>{
    const cur=document.createElement('span'); cur.className='tw-cur';
    el.innerHTML=''; el.appendChild(cur); let i=0;
    function tick(){
      if(i<html.length){
        if(html[i]==='<'){const e2=html.indexOf('>',i);if(e2!==-1){cur.insertAdjacentHTML('beforebegin',html.slice(i,e2+1));i=e2+1;}else{cur.insertAdjacentHTML('beforebegin','&lt;');i++;}}
        else if(html[i]==='&'){const e2=html.indexOf(';',i);if(e2!==-1){cur.insertAdjacentHTML('beforebegin',html.slice(i,e2+1));i=e2+1;}else{cur.insertAdjacentHTML('beforebegin','&');i++;}}
        else{cur.insertAdjacentHTML('beforebegin',html[i++]);}
        scrollBot();
        const ch=html[i-1];
        setTimeout(tick,ch==='.'||ch==='!'||ch==='?'?spd*7:ch===','?spd*3:spd);
      } else { cur.remove(); res(); }
    }
    tick();
  });
}

/* â•â•â•â• AUTO-SPEAK â•â•â•â• */
let autoSpeak=false;
function toggleAS(){
  autoSpeak=!autoSpeak;
  document.getElementById('asBtn').classList.toggle('active',autoSpeak);
  document.getElementById('spAsItem').classList.toggle('active',autoSpeak);
  const b=document.getElementById('asBadge'); b.textContent=autoSpeak?'ON':'OFF'; b.classList.toggle('on',autoSpeak);
  toast(autoSpeak?'// auto-speak: enabled':'// auto-speak: disabled');
}

/* â•â•â•â• SEARCH â•â•â•â• */
let srOpen=false, srM=[], srI=-1;
function toggleSearch(){ srOpen=!srOpen; document.getElementById('searchBar').classList.toggle('open',srOpen); if(srOpen)setTimeout(()=>document.getElementById('sbIn').focus(),200); else clearSearch(); }
function closeSearch(){ srOpen=false; document.getElementById('searchBar').classList.remove('open'); clearSearch(); }
function clearSearch(){ document.getElementById('sbIn').value=''; document.getElementById('sbMeta').textContent='â€”'; document.querySelectorAll('mark.hl').forEach(m=>m.replaceWith(document.createTextNode(m.textContent))); document.getElementById('msgs').normalize(); srM=[];srI=-1; }
function doSearch(){
  document.querySelectorAll('mark.hl').forEach(m=>m.replaceWith(document.createTextNode(m.textContent)));
  document.getElementById('msgs').normalize(); srM=[];srI=-1;
  const q=document.getElementById('sbIn').value.trim(); if(!q){document.getElementById('sbMeta').textContent='â€”';return;}
  document.querySelectorAll('#msgs .msg-bubble').forEach(b=>hlN(b,q));
  srM=Array.from(document.querySelectorAll('mark.hl'));
  if(srM.length){srI=0;updSr();}else document.getElementById('sbMeta').textContent='0 results';
}
function hlN(node,q){
  const re=new RegExp(escRE(q),'gi');
  if(node.nodeType===3){const txt=node.textContent;if(!re.test(txt))return;const f=document.createDocumentFragment();let last=0,m;re.lastIndex=0;while((m=re.exec(txt))!==null){f.appendChild(document.createTextNode(txt.slice(last,m.index)));const mk=document.createElement('mark');mk.className='hl';mk.textContent=m[0];f.appendChild(mk);last=m.index+m[0].length;}f.appendChild(document.createTextNode(txt.slice(last)));node.replaceWith(f);}
  else if(node.nodeType===1&&node.nodeName!=='MARK'){Array.from(node.childNodes).forEach(c=>hlN(c,q));}
}
function escRE(s){return s.replace(/[.*+?^${}()|[\]\\]/g,'\\$&');}
function updSr(){ srM.forEach((m,i)=>m.classList.toggle('cur',i===srI)); document.getElementById('sbMeta').textContent=`${srI+1}/${srM.length}`; if(srM[srI])srM[srI].scrollIntoView({behavior:'smooth',block:'center'}); }
function navSearch(d){ if(!srM.length)return; srI=(srI+d+srM.length)%srM.length; updSr(); }
function sNav(e){ if(e.key==='Enter'){e.preventDefault();navSearch(e.shiftKey?-1:1);}if(e.key==='Escape')closeSearch(); }
document.addEventListener('keydown',e=>{ if((e.ctrlKey||e.metaKey)&&e.key==='f'){e.preventDefault();if(!srOpen)toggleSearch();else document.getElementById('sbIn').focus();} if(e.key==='Escape'&&srOpen)closeSearch(); });

/* â•â•â•â• TYPING HINT â•â•â•â• */
let tTmr;
function showHint(){ document.getElementById('typHint').classList.add('vis'); clearTimeout(tTmr); tTmr=setTimeout(hideHint,1600); }
function hideHint(){ clearTimeout(tTmr); document.getElementById('typHint').classList.remove('vis'); }

/* â•â•â•â• INPUT â•â•â•â• */
function kDown(e){ if(e.key==='Enter'&&!e.shiftKey){e.preventDefault();hideHint();sendMsg();} }
function onInp(e){ const ta=e.target;ta.style.height='auto';ta.style.height=Math.min(ta.scrollHeight,140)+'px'; const l=ta.value.length; const cc=document.getElementById('charCt'); cc.textContent=l>350?`${l}/500`:''; cc.classList.toggle('warn',l>450); if(l>0)showHint();else hideHint(); }
function clearIn(){ const ta=document.getElementById('msgIn');ta.value='';ta.style.height='auto';document.getElementById('charCt').textContent='';hideHint();ta.focus(); }
function scrollBot(){ const w=document.getElementById('msgsScroll');w.scrollTop=w.scrollHeight; }
function qCmd(t){ document.getElementById('msgIn').value=t; sendMsg(); }

/* â•â•â•â• SEND â•â•â•â• */
function sendMsg(){
  const ta=document.getElementById('msgIn'); const txt=ta.value.trim(); if(!txt)return;
  hideHint();
  document.getElementById('welcomeEl')?.remove();
  document.getElementById('qaRow').style.display='none';
  addMsg('user',txt);
  ta.value='';ta.style.height='auto';document.getElementById('charCt').textContent='';
  msgCount++;
  document.getElementById('sbMsgCount').textContent=`MESSAGES: ${msgCount}`;
  const tid=showThinking();
  setTimeout(()=>{ removeThinking(tid); const r=genResp(txt); addMsg('ai',r); if(autoSpeak)speak(r); },600+Math.random()*800);
}

/* â•â•â•â• MESSAGES â•â•â•â• */
function tsNow(){ return new Date().toLocaleTimeString('en-US',{hour12:false,hour:'2-digit',minute:'2-digit',second:'2-digit'}); }
function addMsg(role,text){
  const msgs=document.getElementById('msgs');
  const d=document.createElement('div'); d.className=`msg ${role}`;
  const name=role==='ai'?'PROFESSOR':(profile.name?profile.name.toUpperCase():'USER');
  const tag=role==='ai'?'OUTPUT':'INPUT';
  const acts=role==='ai'?`<div class="msg-acts"><button class="m-btn" onclick="speakBubble(this)">â–¶ SPEAK</button><button class="m-btn" onclick="copyBubble(this)">â˜ COPY</button><button class="m-btn" onclick="stopSpeak()">â¹ STOP</button></div>`:'';
  if(role==='ai'&&twOn){
    d.innerHTML=`<div class="msg-header"><span class="msg-role">${name}</span><span class="msg-tag">${tag}</span><span class="msg-time">${tsNow()}</span></div><div class="msg-bubble"></div>${acts}`;
    msgs.appendChild(d); scrollBot();
    typewrite(d.querySelector('.msg-bubble'),fmt(text),12);
  } else {
    d.innerHTML=`<div class="msg-header"><span class="msg-role">${name}</span><span class="msg-tag">${tag}</span><span class="msg-time">${tsNow()}</span></div><div class="msg-bubble">${fmt(text)}</div>${acts}`;
    msgs.appendChild(d); scrollBot();
  }
}
let typN=0;
function showThinking(){
  const id='th'+(++typN);
  const d=document.createElement('div');d.className='thinking-msg';d.id=id;
  d.innerHTML=`<div class="msg-header"><span class="msg-role" style="color:var(--green)">PROFESSOR</span><span class="msg-tag" style="background:var(--green-dim);color:var(--green);border:1px solid rgba(0,234,100,.2)">PROCESSING</span></div><div class="thinking-bar"><div class="thinking-dots"><div class="td"></div><div class="td"></div><div class="td"></div></div><span style="letter-spacing:2px;">COMPUTING RESPONSE...</span></div>`;
  document.getElementById('msgs').appendChild(d);scrollBot();return id;
}
function removeThinking(id){ const e=document.getElementById(id);if(e)e.remove(); }
function fmt(t){ return t.replace(/\*\*(.*?)\*\*/g,'<strong>$1</strong>').replace(/\*(.*?)\*/g,'<em>$1</em>').replace(/```(\w*)\n?([\s\S]*?)```/g,'<pre>$2</pre>').replace(/`([^`]+)`/g,'<code>$1</code>').replace(/\n/g,'<br>'); }
function speakBubble(btn){ const b=btn.closest('.msg').querySelector('.msg-bubble'); speak(b.innerText); }
function copyBubble(btn){ const b=btn.closest('.msg').querySelector('.msg-bubble'); navigator.clipboard.writeText(b.innerText).then(()=>toast('// copied to clipboard','g')); }

/* â•â•â•â• NEW CHAT â•â•â•â• */
function newChat(){
  sessionNum++;
  document.getElementById('sbSession').textContent=`SESSION: #${String(sessionNum).padStart(3,'0')}`;
  document.getElementById('sessionLabel').textContent=`session_${String(sessionNum).padStart(3,'0')}`;
  msgCount=0; document.getElementById('sbMsgCount').textContent='MESSAGES: 0';
  document.getElementById('msgs').innerHTML=`<div class="welcome" id="welcomeEl"><div class="terminal-box"><div class="tb-header"><div class="tb-dot tb-dot-r"></div><div class="tb-dot tb-dot-y"></div><div class="tb-dot tb-dot-g"></div><span class="tb-filename">professor_ai.sh</span></div><div class="tb-body"><div class="tb-line"><span class="tb-prompt">$</span><span class="tb-cmd"> professor <span class="tb-string">--new-session</span></span></div><div class="tb-line"><span class="tb-prompt" style="opacity:0">$</span><span class="tb-out">New session initialised <span style="color:var(--green)">âœ“</span></span></div><div class="tb-line"><span class="tb-prompt">$</span><span style="color:var(--text-2)"> Ready. Waiting for input </span><span class="tb-cursor"></span></div></div></div></div>`;
  document.getElementById('qaRow').style.display='flex';
  toast('// new session started','g');
}
function clearChat(){ newChat(); closePanel(); }

/* â•â•â•â• TTS â•â•â•â• */
let voices=[]; let selVoice=null;
function loadVoices(){ voices=window.speechSynthesis.getVoices(); const prefs=['Google UK English Male','Daniel','Alex','Microsoft David']; for(const p of prefs){const v=voices.find(v=>v.name.includes(p));if(v){selVoice=v;break;}} }
window.speechSynthesis.onvoiceschanged=loadVoices; loadVoices();
function speak(text,onEnd=null){
  window.speechSynthesis.cancel();
  const clean=text.replace(/<[^>]*>/g,'').replace(/\*+/g,'').replace(/`/g,'');
  const u=new SpeechSynthesisUtterance(clean);
  u.rate=0.92;u.pitch=0.84;u.volume=1;
  if(selVoice)u.voice=selVoice;
  if(onEnd)u.onend=onEnd;
  window.speechSynthesis.speak(u); return u;
}
function stopSpeak(){ window.speechSynthesis.cancel(); setVoiceState('idle'); }

/* â•â•â•â• VOICE MODE â•â•â•â• */
let voiceOpen=false, recog=null;
function openVoice(){
  if(!('SpeechRecognition' in window||'webkitSpeechRecognition' in window)){toast('// voice not supported. use Chrome','r');return;}
  voiceOpen=true;
  document.getElementById('voiceOverlay').classList.add('open');
  setVoiceState('idle');
}
function closeVoice(){
  if(recog){try{recog.stop();}catch(e){}recog=null;}
  window.speechSynthesis.cancel();
  voiceOpen=false;
  document.getElementById('voiceOverlay').classList.remove('open');
  document.getElementById('voiceChip').style.display='none';
  setVoiceState('idle');
}
function setVoiceState(state){
  const ring=document.getElementById('visRing');
  const wave=document.getElementById('vWave');
  const icon=document.getElementById('visIcon');
  const label=document.getElementById('vStatusLabel');
  const tr=document.getElementById('vTranscript');
  ring.className='vis-ring '+state;
  wave.className='waveform '+state;
  label.className='vt-status-label '+state;
  label.textContent=state.toUpperCase();
  tr.className='vt-transcript '+state;
  icon.textContent = state==='listening'?'ğŸ‘‚':state==='speaking'?'ğŸ’¬':state==='processing'?'âš™ï¸':'ğŸ“';
  document.getElementById('voiceChip').style.display=state==='listening'?'flex':'none';
}
function setTranscript(txt){ document.getElementById('vTranscript').textContent=txt; }

function startListening(){
  if(recog){recog.stop();recog=null;document.getElementById('vMicBtn').textContent='ğŸ¤ START LISTENING';setVoiceState('idle');setTranscript('# Stopped. Click to listen again.');return;}
  window.speechSynthesis.cancel();
  const SR=window.SpeechRecognition||window.webkitSpeechRecognition;
  recog=new SR(); recog.continuous=false; recog.interimResults=true; recog.lang='en-US';
  setVoiceState('listening');
  setTranscript('# Listening... speak now.');
  document.getElementById('vMicBtn').textContent='â¹ STOP LISTENING';
  document.getElementById('vStopBtn').style.display='none';
  let finalTxt='';
  recog.onresult=e=>{
    let interim='',final='';
    for(let i=e.resultIndex;i<e.results.length;i++){ if(e.results[i].isFinal)final+=e.results[i][0].transcript; else interim+=e.results[i][0].transcript; }
    finalTxt=final||finalTxt;
    setTranscript(finalTxt||interim||'# Listening...');
  };
  recog.onerror=e=>{
    recog=null; document.getElementById('vMicBtn').textContent='ğŸ¤ START LISTENING';
    setVoiceState('idle'); setTranscript('# Error: '+e.error+'. Click to try again.');
    toast(`// mic error: ${e.error}`,'r');
  };
  recog.onend=()=>{
    recog=null; document.getElementById('vMicBtn').textContent='ğŸ¤ START LISTENING';
    if(!finalTxt.trim()){setVoiceState('idle');setTranscript('# Nothing detected. Click to try again.');return;}
    setVoiceState('processing');
    setTranscript(`> "${finalTxt}"\n\n# Computing response...`);
    // Add to chat
    document.getElementById('welcomeEl')?.remove();
    document.getElementById('qaRow').style.display='none';
    addMsg('user',finalTxt);
    msgCount++; document.getElementById('sbMsgCount').textContent=`MESSAGES: ${msgCount}`;
    setTimeout(()=>{
      const resp=genResp(finalTxt);
      addMsg('ai',resp);
      setVoiceState('speaking');
      const cleanResp=resp.replace(/<[^>]*>/g,'').replace(/\*+/g,'').replace(/`/g,'').substring(0,200)+(resp.length>200?'...':'');
      setTranscript(`# Professor speaking:\n\n"${cleanResp}"`);
      document.getElementById('vStopBtn').style.display='';
      document.getElementById('vMicBtn').style.display='none';
      speak(resp,()=>{
        setVoiceState('idle');
        setTranscript('# Done. Click to speak again.');
        document.getElementById('vStopBtn').style.display='none';
        document.getElementById('vMicBtn').style.display='';
        document.getElementById('vMicBtn').textContent='ğŸ¤ START LISTENING';
      });
    },500);
  };
  recog.start();
}
document.getElementById('vStopBtn').onclick=()=>{ window.speechSynthesis.cancel(); setVoiceState('idle'); setTranscript('# Stopped. Click to speak again.'); document.getElementById('vStopBtn').style.display='none'; document.getElementById('vMicBtn').style.display=''; };

/* â•â•â•â• PDF â•â•â•â• */
function openPDF(){openModal('pdfModal');}
function doPDF(){
  const q=document.getElementById('pdfQ').value.trim();if(!q)return;
  document.getElementById('pdfRes').innerHTML=`<div style="font-family:var(--font-mono);font-size:11px;color:var(--text-3);padding:8px 0;letter-spacing:1px;">// searching repositories...</div>`;
  const src=[{n:'Google Scholar',u:`https://scholar.google.com/scholar?q=${encodeURIComponent(q)}+filetype:pdf`,t:'SCHOLAR'},{n:'arXiv Papers',u:`https://arxiv.org/search/?query=${encodeURIComponent(q)}&searchtype=all`,t:'ARXIV'},{n:'Semantic Scholar',u:`https://www.semanticscholar.org/search?q=${encodeURIComponent(q)}`,t:'SEMANTIC'},{n:'PDF Drive',u:`https://www.pdfdrive.com/search?q=${encodeURIComponent(q)}`,t:'PDFDRIVE'},{n:'Internet Archive',u:`https://archive.org/search?query=${encodeURIComponent(q)}&mediatype=texts`,t:'ARCHIVE'}];
  setTimeout(()=>{ document.getElementById('pdfRes').innerHTML=src.map(s=>`<div class="res-item" onclick="window.open('${s.u}','_blank')"><div class="res-tag">${s.t}</div><div class="res-name">${s.n}</div></div>`).join(''); },500);
}
/* â•â•â•â• IMG â•â•â•â• */
function openImg(){openModal('imgModal');}
function doImg(){
  const q=document.getElementById('imgQ').value.trim();if(!q)return;
  document.getElementById('imgRes').innerHTML=`<div style="font-family:var(--font-mono);font-size:11px;color:var(--text-3);padding:8px 0;letter-spacing:1px;">// scanning databases...</div>`;
  const src=[{n:'Google Images',u:`https://www.google.com/images?q=${encodeURIComponent(q)}`,t:'GOOGLE'},{n:'Unsplash',u:`https://unsplash.com/s/photos/${encodeURIComponent(q)}`,t:'UNSPLASH'},{n:'Pexels',u:`https://www.pexels.com/search/${encodeURIComponent(q)}/`,t:'PEXELS'},{n:'Bing Images',u:`https://www.bing.com/images/search?q=${encodeURIComponent(q)}`,t:'BING'},{n:'Pixabay',u:`https://pixabay.com/images/search/${encodeURIComponent(q)}/`,t:'PIXABAY'}];
  setTimeout(()=>{ document.getElementById('imgRes').innerHTML=src.map(s=>`<div class="res-item" onclick="window.open('${s.u}','_blank')"><div class="res-tag">${s.t}</div><div class="res-name">${s.n}</div></div>`).join(''); },400);
}

/* â•â•â•â• AI RESPONSES â•â•â•â• */
const R={
  greet:[n=>`Hello, ${n}. Professor online.\n\n\`\`\`\nStatus: ACTIVE\nMode: Interactive\nKnowledge: LOADED\n\`\`\`\n\nWhat would you like to work on today?`,n=>`Hi ${n}! Ready to assist.\n\nType a question, use the challenge cards, or hit ğŸ¤ to talk to me.`],
  time:[()=>`\`\`\`\nCURRENT TIME: ${new Date().toLocaleTimeString()}\nCURRENT DATE: ${new Date().toLocaleDateString('en-US',{weekday:'long',year:'numeric',month:'long',day:'numeric'})}\nTIMESTAMP:    ${Date.now()}\n\`\`\``],
  joke:[()=>`Why do programmers prefer dark mode?\n\nBecause **light attracts bugs.** ğŸ›`,()=>`A programmer's wife says: *"Go to the shop, get a litre of milk. If they have eggs, get 6."*\n\nHe comes back with **6 litres of milk.**\n\n*"They had eggs."*`,()=>`Why did the developer quit his job?\n\nBecause he didn't get **arrays.** ğŸ˜„`],
  quantum:[n=>`Great question, ${n}. Here's quantum computing broken down:\n\n**Classical bits:** 0 or 1\n**Qubits:** 0, 1, or **both simultaneously** (superposition)\n\nThis gives quantum computers exponential parallelism:\n\n\`\`\`\nClassical: O(2^n) sequential operations\nQuantum:   O(n) parallel evaluations\n\`\`\`\n\n**Real-world applications:**\n- Cryptography & post-quantum security\n- Molecular simulation for drug discovery\n- Optimisation (logistics, routing, finance)\n\nWant me to go deeper?`],
  ai:[n=>`**Top AI trends in 2025**, ${n}:\n\n**1. Multimodal models**\nText + images + audio + video in a single model (GPT-4o, Gemini).\n\n**2. Agentic AI**\nModels that plan and take autonomous multi-step actions.\n\n**3. Open-source surge**\nLlama 3, Mistral, Qwen closing the gap fast.\n\n**4. On-device inference**\nSmaller, faster models running locally â€” no cloud required.\n\n\`\`\`python\n# The shift: from assistant â†’ agent\ndef ai_evolution():\n    return ["answer", "reason", "plan", "act"]\n\`\`\``],
  email:[()=>`Here's a professional email template:\n\n**Subject:** Project Update â€” Revised Timeline\n\n---\n\nDear [Name],\n\nI hope this finds you well. I'm writing to update you on our project timeline.\n\nDue to [reason], we've revised the delivery date from **[original]** to **[new date]**. A clear recovery plan is in place.\n\nI'm happy to jump on a call to walk through the details.\n\nBest,\n[Your name]`],
  python:[()=>`Here's a Python function to find prime numbers:\n\n\`\`\`python\ndef is_prime(n):\n    if n < 2: return False\n    if n == 2: return True\n    if n % 2 == 0: return False\n    for i in range(3, int(n**0.5) + 1, 2):\n        if n % i == 0:\n            return False\n    return True\n\ndef primes_up_to(limit):\n    return [n for n in range(2, limit+1) if is_prime(n)]\n\n# Example\nprint(primes_up_to(50))\n# [2, 3, 5, 7, 11, 13, 17, 19, 23, 29, 31, 37, 41, 43, 47]\n\`\`\`\n\nTime complexity: **O(nâˆšn)** â€” can be improved with the Sieve of Eratosthenes.`],
  sort:[()=>`Here's a Python sort function with multiple approaches:\n\n\`\`\`python\n# Built-in (Timsort) â€” O(n log n)\nmy_list = [3, 1, 4, 1, 5, 9, 2, 6]\nsorted_list = sorted(my_list)\n\n# In-place\nmy_list.sort()\n\n# Custom key\nwords = ["banana", "apple", "cherry"]\nwords.sort(key=len)  # Sort by length\n\n# Reverse sort\nnumbers = [3, 1, 4, 1, 5]\nnumbers.sort(reverse=True)\n\`\`\``],
  space:[()=>`Here's a mind-bending space fact:\n\nThere are more **stars in the observable universe** than **grains of sand on all of Earth's beaches** â€” approximately **10Â²â´ stars**.\n\n\`\`\`\nObservable universe diameter: ~93 billion light-years\nEstimated stars:              ~2 Ã— 10Â²Â³\nGrains of sand on Earth:     ~7.5 Ã— 10Â¹â¸\n\nRatio: ~26,666 stars per grain of sand\n\`\`\``],
  pdf:[n=>`Opening PDF search for you, ${n}. Scanning Google Scholar, arXiv, Semantic Scholar and more.`],
  img:[n=>`Opening image search, ${n}. Searching across Google Images, Unsplash, Pexels and more.`],
  fallback:[n=>`Understood, ${n}. Processing your query:\n\n\`\`\`\n> Input received\n> Analysing...\n> Generating response...\n\`\`\`\n\n${fbBody()}\n\nNeed me to go deeper on any aspect?`,n=>`Query received. Here's my analysis, ${n}:\n\n${fbBody()}\n\nWant me to elaborate?`]
};
function fbBody(){const a=["Context matters here. Could you give me more detail about what you're trying to solve?","There are several valid approaches depending on your constraints and goals.","This is a nuanced area. I'd recommend starting with first principles before jumping to implementation.","The standard approach works in most cases, but there are edge cases worth considering."];return a[Math.floor(Math.random()*a.length)];}
function pick(arr){const f=arr[Math.floor(Math.random()*arr.length)];return typeof f==='function'?f(profile.name||'there'):f;}

function genResp(txt){
  const lo=txt.toLowerCase();
  if(/^(hi|hello|hey|howdy|good (morning|afternoon|evening))/i.test(lo)) return pick(R.greet);
  if(/\btime\b|\bdate\b|\bday\b|\btoday\b|\bwhat time\b|\bclock\b/i.test(lo)) return pick(R.time);
  if(/\bjoke\b|\bfunny\b|\bhumou?r\b|\blaugh\b/i.test(lo)) return pick(R.joke);
  if(/\bquantum\b/i.test(lo)) return pick(R.quantum);
  if(/\bai\b|\bartificial intelligence\b|\bgpt\b|\bllm\b|\blatest.*ai|ai.*trend/i.test(lo)) return pick(R.ai);
  if(/email|draft|write.*professional|professional.*email/i.test(lo)) return pick(R.email);
  if(/python|prime|sort|algorithm|function|code|program/i.test(lo) && /sort|array|list/i.test(lo)) return pick(R.sort);
  if(/python|prime|algorithm|function|code|program/i.test(lo)) return pick(R.python);
  if(/\bspace\b|\buniverse\b|\bnebula\b|\bstar\b|\bgalaxy\b|\bfact.*space/i.test(lo)) return pick(R.space);
  if(/\bpdf\b|\bdocument\b|\bpaper\b|\bacademic\b/i.test(lo)){ setTimeout(openPDF,400); return pick(R.pdf); }
  if(/\bimage\b|\bphoto\b|\bpicture\b/i.test(lo)){ setTimeout(openImg,400); return pick(R.img); }
  return pick(R.fallback);
}

/* â•â•â•â• TOAST â•â•â•â• */
let tT;
function toast(msg,type=''){const t=document.getElementById('toast');t.textContent=msg;t.className=`toast show ${type}`;clearTimeout(tT);tT=setTimeout(()=>t.className='toast',2800);}
</script>
</body>
</html>
